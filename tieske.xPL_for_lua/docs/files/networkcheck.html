<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->



<!-- File list -->

<h1>Files</h1>
<ul>

	<li><strong>networkcheck.lua</strong></li>
	
	<li>
		<a href="../files/xPLGirder.html">xPLGirder.lua</a>
	</li>

	<li>
		<a href="../files/xpl.html">xpl.lua</a>
	</li>

	<li>
		<a href="../files/xplclasses\xpldevice.html">xplclasses\xpldevice.lua</a>
	</li>

	<li>
		<a href="../files/xplclasses\xplfilter.html">xplclasses\xplfilter.lua</a>
	</li>

	<li>
		<a href="../files/xplclasses\xplmessage.html">xplclasses\xplmessage.lua</a>
	</li>

	<li>
		<a href="../files/xplclasses\xplsend.html">xplclasses\xplsend.lua</a>
	</li>

	<li>
		<a href="../files/xplsender.html">xplsender.lua</a>
	</li>

</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>networkcheck.lua</code></h1>







<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#checkconnection">checkconnection</a>&nbsp;(oldState)</td>
	<td class="summary">Checks the network connection of the system and detects changes in connection or IP adress.</td>
	</tr>

</table>






<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="checkconnection"></a><strong>checkconnection</strong>&nbsp;(oldState)</dt>
<dd>
Checks the network connection of the system and detects changes in connection or IP adress. Call repeatedly to check status for changes. With every call include the previous results to compare with.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>oldState</em></code>: (table) previous result to compare with, or nil if not called before
	</li>
	
</ul>




<h3>Usage:</h3>
<ul><pre class=example>function test()<br />    print ("TEST: entering endless check loop, change connection settings and watch the changes come in...")<br />    require ("base")	-- from stdlib<br />    local change, data<br />    while true do<br />        change, data = checkconnection(data)<br />        if change then<br />            print (tostring(data))<br />        end<br />    end<br />end</pre></ul>



<h3>Return values:</h3>
<ol>
	
	<li>changed (boolean) same as <code>newstate.changed</code> (see below), the initial call will always return <code>true</code>.</li>
	
	<li>newState (table) same as regular info from <code>socket.dns</code> calls, but extended with; <ul><li><code>localhostname </code>= (string) name of localhost (only field that can be set, defaults to <code>'localhost'</code>)</li> <li><code>localhostip   </code>= (string) ip address for localhostname</li> <li><code>connected     </code>= (string) either <code>'yes'</code>, <code>'no'</code>, or <code>'loopback'</code> (loopback means connected to localhost, no external connection)</li> <li><code>changed       </code>= (boolean) true if oldstate is different on; <code>name</code>, <code>connected</code>, or <code>ip[1]</code> properties</li></ul></li>
	
</ol>



</dd>


</dl>







</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
